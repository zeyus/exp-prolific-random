var jsPsychHtmlKeyboardResponse=function(s){"use strict";const t={name:"html-keyboard-response",parameters:{stimulus:{type:s.ParameterType.HTML_STRING,pretty_name:"Stimulus",default:void 0},choices:{type:s.ParameterType.KEYS,pretty_name:"Choices",default:"ALL_KEYS"},prompt:{type:s.ParameterType.HTML_STRING,pretty_name:"Prompt",default:null},stimulus_duration:{type:s.ParameterType.INT,pretty_name:"Stimulus duration",default:null},trial_duration:{type:s.ParameterType.INT,pretty_name:"Trial duration",default:null},response_ends_trial:{type:s.ParameterType.BOOL,pretty_name:"Response ends trial",default:!0}}};class e{constructor(s){this.jsPsych=s}trial(s,t){var e='<div id="jspsych-html-keyboard-response-stimulus">'+t.stimulus+"</div>";null!==t.prompt&&(e+=t.prompt),s.innerHTML=e;var i={rt:null,key:null};const a=()=>{this.jsPsych.pluginAPI.clearAllTimeouts(),void 0!==l&&this.jsPsych.pluginAPI.cancelKeyboardResponse(l);var e={rt:i.rt,stimulus:t.stimulus,response:i.key};s.innerHTML="",this.jsPsych.finishTrial(e)};if("NO_KEYS"!=t.choices)var l=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:e=>{s.querySelector("#jspsych-html-keyboard-response-stimulus").className+=" responded",null==i.key&&(i=e),t.response_ends_trial&&a()},valid_responses:t.choices,rt_method:"performance",persist:!1,allow_held_key:!1});null!==t.stimulus_duration&&this.jsPsych.pluginAPI.setTimeout((()=>{s.querySelector("#jspsych-html-keyboard-response-stimulus").style.visibility="hidden"}),t.stimulus_duration),null!==t.trial_duration&&this.jsPsych.pluginAPI.setTimeout(a,t.trial_duration)}simulate(s,t,e,i){"data-only"==t&&(i(),this.simulate_data_only(s,e)),"visual"==t&&this.simulate_visual(s,e,i)}create_simulation_data(s,t){const e={stimulus:s.stimulus,rt:this.jsPsych.randomization.sampleExGaussian(500,50,1/150,!0),response:this.jsPsych.pluginAPI.getValidKey(s.choices)},i=this.jsPsych.pluginAPI.mergeSimulationData(e,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(s,i),i}simulate_data_only(s,t){const e=this.create_simulation_data(s,t);this.jsPsych.finishTrial(e)}simulate_visual(s,t,e){const i=this.create_simulation_data(s,t),a=this.jsPsych.getDisplayElement();this.trial(a,s),e(),null!==i.rt&&this.jsPsych.pluginAPI.pressKey(i.response,i.rt)}}return e.info=t,e}(jsPsychModule);
//# sourceMappingURL=index.browser.min.js.map
